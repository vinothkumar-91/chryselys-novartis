<div class="container-fluid">
  <div class="row row1" >
    <div class="col col-sm-12 col-md-6 col-lg-3" >
      <div class="card-box">
      <div class="float-start">
        <div class="tit">Trials</div>
        <strong  *ngIf="!apiCall['header']" class="value">{{landscapeDash['header'].trails_count | shortNumber}}</strong>
        <div  *ngIf="apiCall['header']" style="width:50px"><app-loader ></app-loader></div>
      </div>
      <img src="./assets/image/icons/trials.svg" alt="" class="svg">
    </div>
  </div>
    <div class="col col-sm-12 col-md-6 col-lg-3">
      <div class="card-box">
      <div class="float-start">
        <div class="tit">Total Sites</div>

        <strong  *ngIf="!apiCall['header']" class="value">{{landscapeDash['header'].us_sites | shortNumber}}
          <strong style="font-size:13px">( US : {{landscapeDash['header'].facilities | shortNumber}} )</strong>
        </strong>
        <div  *ngIf="apiCall['header']" style="width:50px"><app-loader ></app-loader></div>
      </div>
      <img src="./assets/image/icons/totalsites.svg" alt="" class="svg">
    </div>
  </div>
    <div class="col col-sm-12 col-md-6 col-lg-3">
      <div class="card-box">
      <div class="float-start">
        <div class="tit">Investigators</div>

        <strong  *ngIf="!apiCall['header']" class="value">{{(landscapeDash['header'].investigators) | shortNumber }}</strong>
        <div  *ngIf="apiCall['header']" style="width:50px"><app-loader ></app-loader></div>
      </div>
      <img src="./assets/image/icons/investigators.svg" alt="" class="svg">
    </div>
  </div>
    <div class="col col-sm-12 col-md-6 col-lg-3">
      <div class="card-box">
      <div class="float-start">
        <div class="tit">Enrollment</div>
        <strong  *ngIf="!apiCall['header']" class="value">{{landscapeDash['header'].enrollment | shortNumber}}</strong>
        <div  *ngIf="apiCall['header']" style="width:50px"><app-loader ></app-loader></div>
      </div>
      <img src="./assets/image/icons/enrollment.svg" alt="" class="svg">
    </div>
  </div>
</div>
  <!-- <div class="row row2">
    <div class="col col-sm-12 col-md-12 col-lg-4">
      <div class="card-box">
      <h6 class="title-inner">#Trials by Study Status<div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
            matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
      </h6>
      <app-loader *ngIf="apiCall['studyStatus']"></app-loader>
      <app-pie-chart   *ngIf="!apiCall['studyStatus']" [value]="landscapeDash['studyStatus']" [extentions]="echartsExtentions"></app-pie-chart>
    </div>
  </div>

  <div class="col col-sm-12 col-md-12 col-lg-4">
    <div class="card-box">
    <h6 class="title-inner">Payment By Sponsors<div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
          matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
    </h6>
    <app-stacked-bar-chart *ngIf="!apiCall['paymentBySponsors']" [values]="landscapeDash['paymentBySponsors']" [extentions]="" class="fw-100" style="height:300px"></app-stacked-bar-chart>
    <app-loader *ngIf="apiCall['paymentBySponsors']"></app-loader><app-line-chart *ngIf="!apiCall['paymentBySponsors']" [values]="landscapeDash['paymentBySponsors']._chartObj" [extentions]="" ></app-line-chart>
  </div>
</div>

</div> -->
  <div class="row row2">
  <div class="col col-sm-12 col-md-12 col-lg-4 col-lg-4full">
    <div class="card-box">
    <h6 class="title-inner">#Trials by Study Status<div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
          matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
    </h6>
    <app-loader *ngIf="apiCall['studyStatus']"></app-loader>
    <app-doughnut-chart style="display: block;margin:0 auto;max-width:500px" *ngIf="!apiCall['studyStatus']" [value]="landscapeDash['studyStatus']" [extentions]="echartsExtentions"></app-doughnut-chart>
    <!-- <app-pie-chart   *ngIf="!apiCall['studyStatus']" [value]="landscapeDash['studyStatus']" [extentions]="echartsExtentions"></app-pie-chart> -->
  </div>
</div>
  <div class="col col-sm-12 col-md-12 col-lg-4">
    <div class="card-box">
      <h6 class="title-inner">#Trials by Phase<div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
            matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
      </h6>
      <app-loader *ngIf="apiCall['trialsPhase']"></app-loader>
      <div class="body"  *ngIf="!apiCall['trialsPhase']" echarts [options]="landscapeDash['trialsPhase']" [extentions]="echartsExtentions" style="height:300px"></div>
    </div>
  </div>
  <div class="col col-sm-12 col-md-12 col-lg-4">
    <!-- col-lg-4full -->
    <div class="card-box">
      <h6 class="title-inner">#Trials across Sponsor<div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
            matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
      </h6>
      <div class="fw-100">
        <app-loader *ngIf="apiCall['trialsSponsor']"></app-loader>
        <div class="sponser-list scroll-div" *ngIf="!apiCall['trialsSponsor']">
          <ul>
            <li *ngFor="let s of landscapeDash['trialsSponsor']" class="d-flex align-items-center">
              <div class="pe-2 ps-0 name">{{s.sponsor}}</div>
              <div class="px-2 py-0 ps-0  w-100 per">
                <div class="progress fw-100">
                  <div class="progress-bar" role="progressbar" [style.width.%]="s.percentage" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <div class="ms-auto px-2 flex-shrink-1 val">{{s.trails}}</div>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>
  </div>
  <div class="row row3">
    <div class="col col-sm-12 col-md-12 col-lg-6">
      <div class="card-box">
      <h6 class="title-inner">Patient enrollment by Sponsor  <small>(Top 5)</small><div class="float-end"><img src="./assets/image/icons/info.svg" height="16"
            alt="" matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
      </h6>
      <div class="fw-100">
        <app-loader *ngIf="apiCall['patientEnrollment']"></app-loader>
        <div class="sponser-list scroll-div" *ngIf="!apiCall['patientEnrollment']">
          <ul>
            <li *ngFor="let s of landscapeDash['patientEnrollment']" class="d-flex align-items-center">
              <div class="pe-2 ps-0 name">{{s.sponsor}}</div>
              <div class="px-2 py-0 ps-0  w-100 per">
                <div class="progress fw-100">
                  <div class="progress-bar" role="progressbar" [style.width.%]="s.percentage" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <div class="ms-auto px-2 flex-shrink-1 val">{{s.enrl}}</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    </div>
    <div class="col col-sm-12 col-md-12 col-lg-6"> <!-- col-lg-4full -->
      <div class="card-box">
      <h6 class="title-inner">Payment by Sponsors <small>(Top 5)</small>
        <div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
            matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
      </h6>
      <app-loader *ngIf="apiCall['paymentBySponsors']"></app-loader>


      <app-line-chart *ngIf="!apiCall['paymentBySponsors']" [values]="landscapeDash['paymentBySponsors']._chartObj" [extentions]="" ></app-line-chart>
      <!-- <app-stacked-bar-chart *ngIf="!apiCall['paymentBySponsors']" [values]="landscapeDash['paymentBySponsors']" [extentions]="" class="fw-100" style="height:300px"></app-stacked-bar-chart> -->
    </div>
  </div>
  </div>
  <div class="row row4"  [ngClass]="{'blur-loader-layer':apiCall['trialDetails']}">
    <div class="col card-box">
      <h6 class="title-inner fw-100">Trial Details<div class="float-end"><img src="./assets/image/icons/info.svg" height="16"  alt=""
            matTooltip="Lorem Ipsum has been the industry's standard dummy text ever since the 1500s"></div>
      </h6>
      <div class="table-header-area mt-1">
          <div class="float-start">
          </div>
          <div class="tablesearch float-end mb-2">
              <mat-form-field appearance="fill">
                  <img src="./assets/image/search.svg" class="search-icon"  height="36" alt="">
                  <input type="text" class="table-search" placeholder="Search ..." matInput
                      #searchContainer autocomplete="off" [(ngModel)]="filterValue" #ctrl="ngModel"
                      (keyup)="applyFilter(searchContainer.value)" />
              </mat-form-field>

          </div>
      </div>
      <div class="table-responsive table-theme1 fw-100">
        <mat-table  [dataSource]="data_dataSource" matTableExporter matSort #dataTable class="no-wrap"
            (matSortChange)="sortData()" matSortActive="name" matSortStart="asc" matSortDisableClear
            #exporter="matTableExporter">
            <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns_order">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <!--  nct_id
                    acronym
                    study_status
                    condition
                    interventions
                    phase
                    sponsor
                    start_date
                    actual_duration
                    actual_enrollment
                    actual_primary_completion_date
                    anticipated_enrollment_max
                    anticipated_primary_completion_date
                    brief_title
                    number_of_facilities
                    official_title
                    total_payments                     -->






                    <span *ngIf="column == 'nct_id'">NCT ID</span>
                    <span *ngIf="column == 'acronym'">Acronym</span>
                    <span *ngIf="column == 'study_status'">Study Status</span>
                    <span *ngIf="column == 'condition'">Condition</span>
                    <span *ngIf="column == 'interventions'">Intervention Name</span>
                    <span *ngIf="column == 'phase'">Phase</span>
                    <span *ngIf="column == 'sponsor'">Sponsor</span>
                    <span *ngIf="column == 'start_date'">Study Start Date</span>
                  </th>
                <td mat-cell *matCellDef="let element" [title]="element[column]" >
                    <!-- [ngClass]="{'text-center':(column=='ROLE')}" -->
                    {{element[column]}}


                  </td>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns_order"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns_order;"
                (click)="currentObj=row;detailView = true" [routerLink]="'/PIT/TrialAnalysisdetail/'+row.nct_id+'/Landscape'"></mat-row>
        </mat-table>

        <table class="mat-table no-data">
            <tr class="mat-row"
                *ngIf="data_dataSource && (!data_dataSource.data.length || !data_dataSource.filteredData.length) && !apiCall['trialDetails']">
                <td class="mat-cell" style="text-align: center;" [attr.colspan]="displayedColumns_order.length">
                    No Records Found! <span
                        *ngIf="!data_dataSource.filteredData.length && data_dataSource.data.length">(Search
                        Result)</span>
                </td>
            </tr>
        </table>
    </div>
    <mat-paginator #orderMatPaginator showFirstLastButtons (page)="pageChanged($event)" [length]="totalRows"
        [pageIndex]="currentPage" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"></mat-paginator>
    </div>
  </div>
  <!-- <div class="row justify-content-md-center">
      <div class="col col-lg-2">
        1 of 3
      </div>
      <div class="col-md-auto">
        Variable width content
      </div>
      <div class="col col-lg-2">
        3 of 3
      </div>
    </div>
    <div class="row">
      <div class="col">
        1 of 3
      </div>
      <div class="col-md-auto">
        Variable width content
      </div>
      <div class="col col-lg-2">
        3 of 3
      </div>
    </div> -->
</div>



<div class="modal show filter-popup" tabindex="-1" role="dialog" aria-labelledby=""
    *ngIf="_gv.portal.headerFilterOption">
    <div class="modal-dialog" role="document">
        <div class="modal-content" >
          <h4 class="innner-title mb-3">Landscape Filter <span class="float-right">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="_gv.portal.headerFilterOption=false">
                <span aria-hidden="true" class="font-initial">&times;</span>
            </button></span></h4>

            <app-loader *ngIf="apiCall['landscapeFilter']"></app-loader>
          <form class="" #form="ngForm" (ngSubmit)="form.form.valid && filterSubmit()" autocomplete="off" *ngIf="!apiCall['landscapeFilter']">
            <div class="f-row offside">
            <div class="f-feilds"  *ngFor="let f of filters">
                  <label>{{f.name}}</label>
                  <div class="form-control-layer fw-100" [ngClass]="{'empty':!filterObj.nctid}">
                    <ng-multiselect-dropdown #multiSelect class="form-control-layer fw-100"
                    [placeholder]="'Select '"
                    [settings]="settings"
                    [data]="filterList[f.id]" [(ngModel)]="landscapeFilterVal[f.id]" [name]="f.id"
                    [disabled]="false"
                    (onFilterChange)="onFilterChange($event)"
                    (onDropDownClose)="onDropDownClose($event)"
                    (onSelect)="onItemSelect($event)"
                    (onDeSelect)="onDeSelect($event)"
                    (onSelectAll)="onSelectAll($event)"
                    (onDeSelectAll)="onDeSelectAll($event)">
                  </ng-multiselect-dropdown>
                  </div>
              </div>
            </div>

            <div class="fw-100 text-left">
              <button class="btn btn-primary" [disabled]="apiCall['common']" (click)="submitFilter()">Submit</button>
                <button class="btn btn-light" (click)="resetAll()">Reset Filters</button>
            </div>
        </form>
        </div>
    </div>
</div>