
  <div class="row p-3" >
    <div class="card-box blur-loader-layer"  [ngClass]="{'blur-loader-layer':apiCall}">

      <div class="table-header-area mt-1">
          <div class="float-start">
            <h6 class="title-inner fw-100 mt-2">PI Targets</h6>
          </div>
          <div class="tablesearch float-end mb-2">
              <img src="./assets/image/icons/download.svg" height="28" alt="" class="donwloadbutton c-p"  (click)="exporter.exportTable('xlsx',{fileName:'PI Target List'})">
              <mat-form-field appearance="fill">
                  <img src="./assets/image/search.svg" class="search-icon" height="36" alt="">
                  <input type="text" class="table-search" placeholder="Search ..." matInput
                      #searchContainer autocomplete="off" [(ngModel)]="filterValue" #ctrl="ngModel"
                      (keyup)="applyFilter(searchContainer.value)" />
              </mat-form-field>
          </div>
      </div>
      <div class="table-responsive table-theme1 fw-100">
        <mat-table matTableExporter [dataSource]="data_dataSource" matSort #dataTable class="no-wrap"
            (matSortChange)="sortData()" matSortActive="name" matSortStart="asc" matSortDisableClear
            #exporter="matTableExporter" [hiddenColumns]="[0,7]">
            <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns_order">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>

                    <!--
                        "bookmark","rank","npi","pi_name","org_nm","status","cluster","moreinfo"
                     -->


                    <span *ngIf="column == 'rank'">Rank</span>
                    <span *ngIf="column == 'npi'">NPI</span>
                    <span *ngIf="column == 'pi_name'">Investigator Name</span>
                    <span *ngIf="column == 'org_nm'">Affiliation</span>
                    <span *ngIf="column == 'status'">Status</span>
                    <span *ngIf="column == 'cluster'">Cluster</span>
                    <span *ngIf="column == 'moreinfo'">More Info</span>
                  </th>
                <td mat-cell *matCellDef="let element" [title]="element[column]?element[column]:''" >
                    <!-- {{element[column]}} -->
                    <span *ngIf="column!='moreinfo' && column!='bookmark' && column!='cluster'" class="text-capitalize">{{(element[column])?element[column].toLowerCase():'-'}}</span>
                    <div *ngIf="column == 'cluster'">
                        <div>
                            <span class="dot red"></span>
                            High in Both
                        </div>
                    </div>
                    <div *ngIf="column == 'bookmark'">
                        <img src="./assets/image/icons/bookmark.svg" height="16" *ngIf="!element.is_book_marked" (click)="currentObj=element;bookmarkupdate(true,element)" class="c-p"/>
                        <img src="./assets/image/icons/bookmark-highlight.svg" height="16"  *ngIf="element.is_book_marked" (click)="currentObj=element;bookmarkupdate(false,element)" class="c-p" />
                    </div>
                    <div *ngIf="column=='moreinfo'" class="text-center more-info">
                        <button class="btn btn-primary btn-sm"  [routerLink]="'/PIT/PITargetDetails/'+element.npi">PI details</button>
                        <button class="btn btn-secondary btn-sm"  [routerLink]="'/PIT/Referraltargets/'+element.npi">Referral Targets</button>
                    </div>
                </td>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns_order"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns_order;" ></mat-row>
        </mat-table>

        <table class="mat-table no-data">
            <tr class="mat-row"  *ngIf="!data_dataSource && apiCall">
                <td class="mat-cell" style="text-align: center;" [attr.colspan]="displayedColumns_order.length">
                    <app-loader></app-loader>
                </td>
            </tr>
            <tr class="mat-row"
                *ngIf="data_dataSource && (!data_dataSource.data.length || !data_dataSource.filteredData.length) && !apiCall">
                <td class="mat-cell" style="text-align: center;" [attr.colspan]="displayedColumns_order.length">
                    No Records Found! <span
                        *ngIf="!data_dataSource.filteredData.length && data_dataSource.data.length">(Search
                        Result)</span>
                </td>
            </tr>
        </table>
    </div>
    <mat-paginator #orderMatPaginator showFirstLastButtons (page)="pageChanged($event)" [length]="totalRows"
        [pageIndex]="currentPage" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"></mat-paginator>
    </div>
  </div>